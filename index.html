<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>YTP Video Maker for Web — Release 1.0</title>
  <link rel="stylesheet" href="assets/style.css" />
</head>
<body>
  <header class="site-header">
    <h1>YTP Video Maker for Web <span class="badge">v1.0</span></h1>
    <p class="tagline">Release Candidate → Release 1.0: improved frame shuffle & frame-loop features, per-source effect controls, and optional local runner integration.</p>
  </header>

  <main class="container">
    <section id="release-notes">
      <h2>Release 1.0 — Highlights</h2>
      <ul>
        <li>Per-source frame shuffle: extract frames and randomly reorder for that YTP jitter/chop effect.</li>
        <li>Per-source loop frames: short frame-precise loops (2–12 frames) with repeat control.</li>
        <li>Per-source effect sliders: speed factor, earrape gain, and toggles are exportable to config.json.</li>
        <li>Improved runner: generate-preview.sh now applies per-source filters before concat and supports the new features.</li>
        <li>Optional local runner endpoint support via assets/ffmpeg.js</li>
      </ul>
    </section>

    <section id="sources">
      <h2>Sources (video / audio / photos)</h2>
      <p>Add sources and configure per-source effects including the new "Shuffle Frames" and "Loop Frames" settings. Export config.json and run the preview runner locally or upload to a local server.</p>
      <div id="source-list"></div>
      <button id="add-source" class="btn">Add source</button>
      <p class="muted">For images, specify duration (seconds). For videos, specify clip start/end (seconds). Sources are concatenated in the order you add them.</p>
    </section>

    <section id="effects-ui">
      <h2>Global & Per-source Effects</h2>
      <p>Global toggles are applied after concat; per-source effects are applied before concat so loop/shuffle work on the segment itself.</p>
      <div id="global-effects">
        <label><input type="checkbox" data-effect="invert" /> Invert</label>
        <label><input type="checkbox" data-effect="mirror" /> Mirror</label>
        <label><input type="checkbox" data-effect="reverse" /> Reverse</label>
        <label><input type="checkbox" data-effect="rainbow_overlay" /> Rainbow Overlay</label>
      </div>
    </section>

    <section id="concat-controls">
      <h2>Concat & Preview</h2>
      <label>Preview scale:
        <select id="preview-scale"><option value="0.3">Low</option><option value="0.5">Medium</option><option value="1.0">Full</option></select>
      </label>
      <label style="margin-left:1rem">Preview FPS: <input id="preview-fps" type="number" value="15" style="width:4rem" /></label>
      <div style="margin-top:1rem;">
        <button id="export-config" class="btn primary">Export config.json</button>
        <button id="download-sample-config" class="btn">Download sample config</button>
        <button id="upload-to-runner" class="btn">Upload to local runner (optional)</button>
      </div>
      <p class="muted">After export, copy config.json and your source files to a machine with ffmpeg/jq and run generate-preview.sh, or upload to a local runner if you implemented one.</p>
    </section>

    <section id="player-section">
      <h2>Preview Player</h2>
      <div id="player-wrap">
        <video id="preview-player" controls style="max-width:100%; background:#000;"></video>
        <div id="player-hint" class="muted">Drop preview.mp4 here or press "p".</div>
      </div>
    </section>

    <section id="how-it-works">
      <h2>How it works</h2>
      <ol>
        <li>Use the UI to compose sources and per-source/global effects. Use the new per-source "Shuffle Frames" and "Loop Frames" options for YTP-style edits.</li>
        <li>Export config.json and copy it along with referenced files to an ffmpeg-capable machine.</li>
        <li>Run: <code>bash generate-preview.sh config.json preview.mp4</code></li>
        <li>Open preview.mp4 in the player (press 'p' or drop the file onto the player).</li>
      </ol>
    </section>

    <footer class="site-footer">
      <p>Repository: <a href="https://github.com/modyegyptstars-bit/WandraikSpiderOS">modyegyptstars-bit/WandraikSpiderOS</a> — Release 1.0</p>
      <p>License: MIT</p>
    </footer>
  </main>

  <script src="assets/ffmpeg.js"></script>
  <script src="assets/player.js"></script>
</body>
</html>